<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-47M2S59YQ6"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-47M2S59YQ6');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tax Calculator - Anurag Karundia & Co</title>
    <style>
        body { font-family: sans-serif; background: #f4f7f6; padding: 15px; display: flex; justify-content: center; }
        .card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); width: 100%; max-width: 380px; position: relative; }
        .watermark { position: fixed; top: 40%; left: 10%; transform: rotate(-30deg); font-size: 30px; color: rgba(0,0,0,0.05); font-weight: bold; pointer-events: none; z-index: 0; }
        .header { text-align: center; border-bottom: 2px solid #1a73e8; margin-bottom: 15px; color: #1a73e8; }
        label { display: block; margin-top: 10px; font-weight: bold; font-size: 13px; }
        input { width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; }
        .regime-box { display: flex; margin: 10px 0; background: #eee; border-radius: 6px; padding: 3px; }
        .rb { flex: 1; padding: 10px; text-align: center; cursor: pointer; font-size: 13px; font-weight: bold; }
        .rb.active { background: #1a73e8; color: white; border-radius: 4px; }
        .btn-main { width: 100%; padding: 15px; background: #1a73e8; color: white; border: none; border-radius: 6px; font-size: 16px; font-weight: bold; cursor: pointer; margin-top: 20px; }
        .result-box { margin-top: 20px; padding: 15px; background: #fffde7; border: 1px solid #fbc02d; border-radius: 8px; text-align: center; display: none; }
        .tax-amt { font-size: 30px; color: #d32f2f; font-weight: bold; margin: 10px 0; }
        .btn-wa { width: 100%; padding: 12px; background: #25D366; color: white; border: none; border-radius: 6px; font-weight: bold; cursor: pointer; margin-top: 5px; }
        table { width: 100%; border-collapse: collapse; font-size: 12px; margin-top: 10px; text-align: left; }
        td { padding: 5px; border-bottom: 1px solid #eee; }
    </style>
</head>
<body>
<div class="watermark">ANURAG KARUNDIA & CO</div>
<div class="card">
    <div class="header">
        <h2 style="margin:5px 0;">Anurag Karundia & Co</h2>
        <p style="margin:5px 0; font-size:12px;">Tax Calculator FY 2025-26</p>
    </div>

    <label>Name</label>
    <input type="text" id="name" placeholder="Full Name">
    <label>Mobile</label>
    <input type="text" id="mob" maxlength="10" placeholder="10 Digit Number">
    <label>PAN</label>
    <input type="text" id="pan" maxlength="10" placeholder="ABCDE1234F" style="text-transform: uppercase;">

    <div class="regime-box">
        <div id="newR" class="rb active" onclick="setRegime('NEW')">New Regime</div>
        <div id="oldR" class="rb" onclick="setRegime('OLD')">Old Regime</div>
    </div>

    <label>Salary / Business Income</label>
    <input type="number" id="sal" value="0">
    
    <div id="oldSection" style="display:none;">
        <label>Home Loan Interest (24b)</label>
        <input type="number" id="loan" value="0">
        <label>80C / 80D Deductions</label>
        <input type="number" id="deduc" value="0">
    </div>

    <label>Other Sources Income</label>
    <input type="number" id="other" value="0">

    <button class="btn-main" onclick="doCalc()">Calculate Tax</button>

    <div id="res" class="result-box">
        <div style="font-size:14px;">Total Tax Payable:</div>
        <div id="totalTax" class="tax-amt">₹0</div>
        <button class="btn-wa" onclick="sendWA()">Share on WhatsApp</button>
        <div id="report"></div>
    </div>
</div>

<script>
    var currentR = "NEW";

    function setRegime(r) {
        currentR = r;
        document.getElementById('newR').className = (r === 'NEW') ? 'rb active' : 'rb';
        document.getElementById('oldR').className = (r === 'OLD') ? 'rb active' : 'rb';
        document.getElementById('oldSection').style.display = (r === 'OLD') ? 'block' : 'none';
        document.getElementById('res').style.display = 'none';
    }

    function doCalc() {
        // Inputs
        var n = document.getElementById('name').value;
        var m = document.getElementById('mob').value;
        var p = document.getElementById('pan').value;
        var s = parseFloat(document.getElementById('sal').value) || 0;
        var o = parseFloat(document.getElementById('other').value) || 0;
        var l = (currentR === 'OLD') ? parseFloat(document.getElementById('loan').value) || 0 : 0;
        var d = (currentR === 'OLD') ? parseFloat(document.getElementById('deduc').value) || 0 : 0;

        // Validation - Simple Check
        if(n=="" || m.length<10 || p.length<10) {
            alert("Please enter Name, 10-digit Mobile and PAN");
            return;
        }

        // Calculation Sequence
        var std = (currentR === 'NEW') ? 75000 : 50000;
        var balance = Math.max(0, s - std - l);
        var gti = balance + o;
        var taxable = Math.max(0, gti - d);

        // Tax Logic
        var tax = 0;
        if(currentR === 'NEW') {
            if (taxable > 2400000) tax = 300000 + (taxable - 2400000) * 0.3;
            else if (taxable > 2000000) tax = 200000 + (taxable - 2000000) * 0.25;
            else if (taxable > 1600000) tax = 120000 + (taxable - 1600000) * 0.2;
            else if (taxable > 1200000) tax = 60000 + (taxable - 1200000) * 0.15;
            else if (taxable > 800000) tax = 20000 + (taxable - 800000) * 0.1;
            else if (taxable > 400000) tax = (taxable - 400000) * 0.05;
        } else {
            if (taxable > 1000000) tax = 112500 + (taxable - 1000000) * 0.3;
            else if (taxable > 500000) tax = 12500 + (taxable - 500000) * 0.2;
            else if (taxable > 250000) tax = (taxable - 250000) * 0.05;
        }

        var rebate = (currentR === 'NEW' && taxable <= 1200000) ? tax : (currentR === 'OLD' && taxable <= 500000 ? Math.min(tax, 12500) : 0);
        var net = Math.max(0, tax - rebate);
        var final = Math.round((net + (net * 0.04)) / 10) * 10;

        // Display
        document.getElementById('totalTax').innerText = "₹" + final.toLocaleString('en-IN');
        document.getElementById('res').style.display = 'block';
        
        document.getElementById('report').innerHTML = `
            <table>
                <tr><td>Balance Salary</td><td>₹${balance}</td></tr>
                <tr><td>GTI</td><td>₹${gti}</td></tr>
                <tr><td>Taxable Income</td><td>₹${taxable}</td></tr>
            </table>
        `;

        gtag('event', 'tax_calculated', {'user_name': n});
    }

    function sendWA() {
        var n = document.getElementById('name').value;
        var t = document.getElementById('totalTax').innerText;
        var text = *Tax Computation - Anurag Karundia & Co*%0A*Name:* ${n}%0A*Tax Payable:* ${t}%0A%0A_Please file my return._;
        window.open("https://wa.me/919634100100?text=" + text, "_blank");
    }
</script>
</body>
</html>
