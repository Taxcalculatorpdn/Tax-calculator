<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tax Calculator - AKC</title>
    <style>
        body { font-family: Arial, sans-serif; background-color: #f0f4f8; padding: 20px; display: flex; justify-content: center; }
        .box { background: white; padding: 25px; border-radius: 15px; width: 100%; max-width: 380px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border: 1px solid #ddd; }
        .header { text-align: center; border-bottom: 2px solid #1a73e8; margin-bottom: 15px; padding-bottom: 10px; }
        .regime-tag { background: #e3f2fd; color: #1a73e8; font-size: 11px; font-weight: bold; padding: 4px 10px; border-radius: 5px; display: inline-block; margin: 8px 0; }
        label { font-weight: bold; display: block; margin-top: 15px; font-size: 13px; color: #333; }
        input { width: 100%; padding: 12px; margin-top: 5px; border: 1px solid #ccc; border-radius: 8px; box-sizing: border-box; font-size: 16px; display: block; }
        .btn-calc { width: 100%; padding: 15px; background: #1a73e8; color: white; border: none; border-radius: 10px; font-size: 18px; font-weight: bold; cursor: pointer; margin-top: 20px; }
        .res-box { display: none; margin-top: 20px; text-align: center; }
        .tax-card { background: #fffde7; border: 1px solid #fbc02d; padding: 15px; border-radius: 12px; }
        #report { display: none; margin-top: 15px; background: #f9f9f9; border: 1px solid #4caf50; padding: 10px; border-radius: 10px; text-align: left; font-size: 13px; }
        table { width: 100%; border-collapse: collapse; }
        td { padding: 8px 0; border-bottom: 1px solid #eee; }
        .wa-btn { background: #25D366; color: white; padding: 12px; border-radius: 8px; font-weight: bold; cursor: pointer; border: none; width: 100%; margin-top: 10px; font-size: 13px; line-height: 1.4; }
    </style>
</head>
<body>

<div class="box">
    <div class="header">
        <h2 style="color:#1a73e8; margin:0;">Anurag Karundia & Co.</h2>
        <div class="regime-tag">FY 2025-26 | New Tax Regime</div>
    </div>

    <label>Taxpayer Name</label>
    <input type="text" id="uName" placeholder="Enter Full Name" autocomplete="off">

    <label>Mobile Number</label>
    <input type="text" id="uMob" maxlength="10" placeholder="Enter 10 Digit Number" autocomplete="off">

    <label>PAN Number</label>
    <input type="text" id="uPan" maxlength="10" placeholder="Enter PAN Number" style="text-transform: uppercase;" autocomplete="off">

    <label>Salary Income</label>
    <input type="number" id="vSal" value="0">

    <label>Business Income</label>
    <input type="number" id="vBus" value="0">

    <label>Short Term Gain (STCG)</label>
    <input type="number" id="vSTCG" value="0">

    <label>Long Term Gain (LTCG)</label>
    <input type="number" id="vLTCG" value="0">

    <button class="btn-calc" onclick="runCalculation()">Calculate Tax</button>

    <div id="resDiv" class="res-box">
        <div class="tax-card">
            <p style="margin:0; font-weight:bold;">Net Tax Payable:</p>
            <h1 id="finalTaxVal" style="color:#d32f2f; margin:5px 0;">Rs. 0</h1>
            <small id="lockLabel" style="color:#f57c00; font-weight:bold;">Details Locked</small>
        </div>
        
        <button id="waBtn" class="wa-btn" onclick="sendWA()">For Computation details click here and come back</button>

        <div id="report">
            <h4 style="margin:0; border-bottom: 2px solid #4caf50; padding-bottom:5px;">Computation Summary</h4>
            <table>
                <tr><td>Net Normal Income</td><td id="rNormal" align="right" style="font-weight:bold;">0</td></tr>
                <tbody id="rSlabRows"></tbody>
                <tr><td>Special Rate Tax</td><td id="rSpecial" align="right" style="font-weight:bold;">0</td></tr>
                <tr style="color:green;"><td>Rebate (u/s 87A)</td><td id="rRebate" align="right" style="font-weight:bold;">0</td></tr>
                <tr style="color:#d32f2f; font-weight:bold; font-size:15px;"><td>TOTAL NET TAX</td><td id="rFinalTotal" align="right">0</td></tr>
            </table>
        </div>
    </div>
</div>

<script>
function runCalculation() {
    var name = document.getElementById('uName').value.trim();
    var mob = document.getElementById('uMob').value.trim();
    var pan = document.getElementById('uPan').value.trim().toUpperCase();

    // 1. Name Check (Strict)
    var badNames = ["DEMO", "ADMIN", "USER", "TEST", "TAXPAYER"];
    if (name.length < 3 || badNames.includes(name.toUpperCase())) {
        alert("Please enter a valid Taxpayer Name.");
        return;
    }

    // 2. Mobile Check (6-9 start, No Repeat)
    var mobPattern = /^[6-9]\d{9}$/;
    var isRepeated = /^(.)\1+$/.test(mob); 
    if (!mobPattern.test(mob) || isRepeated) { 
        alert("Please enter a valid 10-digit mobile number."); 
        return; 
    }
    
    // 3. PAN Check (Individual)
    var panPattern = /^[A-Z]{3}[P]{1}[A-Z]{1}[0-9]{4}[A-Z]{1}$/;
    if (!panPattern.test(pan)) { 
        alert("Invalid PAN Number."); 
        return; 
    }

    var sal = parseFloat(document.getElementById('vSal').value) || 0;
    var bus = parseFloat(document.getElementById('vBus').value) || 0;
    var st = parseFloat(document.getElementById('vSTCG').value) || 0;
    var lt = parseFloat(document.getElementById('vLTCG').value) || 0;

    var sd = sal > 0 ? 75000 : 0;
    var nInc = Math.max(0, (sal - sd) + bus);
    var tInc = nInc + st + lt;

    var nt = 0;
    var rows = "";
    var tmp = nInc;

    var slabs = [
        {limit: 2400000, rate: 0.30}, {limit: 2000000, rate: 0.25}, 
        {limit: 1600000, rate: 0.20}, {limit: 1200000, rate: 0.15}, 
        {limit: 800000, rate: 0.10}, {limit: 400000, rate: 0.05}
    ];

    slabs.forEach(function(s) {
        if (tmp > s.limit) {
            var amt = tmp - s.limit;
            var tx = amt * s.rate;
            nt += tx;
            rows = "<tr><td style='color:#666;'>â”” " + (s.rate*100) + "% Slab</td><td align='right'>Rs. " + Math.round(tx).toLocaleString('en-IN') + "</td></tr>" + rows;
            tmp = s.limit;
        }
    });

    var spTax = (st * 0.15) + (Math.max(0, lt - 125000) * 0.125);
    var raw = nt + spTax;
    var reb = 0;

    if (tInc <= 1200000) { reb = raw; }
    else if (tInc <= 1275000) { 
        var d = tInc - 1200000; 
        if (raw > d) reb = raw - d; 
    }

    var final = Math.round((raw - reb) * 1.04 / 10) * 10;

    document.getElementById('finalTaxVal').innerText = "Rs. " + final.toLocaleString('en-IN');
    document.getElementById('rNormal').innerText = "Rs. " + nInc.toLocaleString('en-IN');
    document.getElementById('rSlabRows').innerHTML = rows;
    document.getElementById('rSpecial').innerText = "Rs. " + Math.round(spTax).toLocaleString('en-IN');
    document.getElementById('rRebate').innerText = "-Rs. " + Math.round(reb).toLocaleString('en-IN');
    document.getElementById('rFinalTotal').innerText = "Rs. " + final.toLocaleString('en-IN');

    document.getElementById('resDiv').style.display = "block";
    document.getElementById('report').style.display = "none";
    document.getElementById('waBtn').style.display = "block";
    document.getElementById('lockLabel').style.display = "block";
}

function sendWA() {
    var m = document.getElementById('uMob').value;
    var n = document.getElementById('uName').value;
    window.open("https://wa.me/919634100100?text=Tax Report Requested for " + n, "_blank");
    setTimeout(function() {
        var c = prompt("Enter last 3 digits of mobile number to unlock:");
        if (c === m.slice(-3)) {
            document.getElementById('waBtn').style.display = "none";
            document.getElementById('lockLabel').style.display = "none";
            document.getElementById('report').style.display = "block";
        }
    }, 1000);
}
</script>
</body>
</html>
