<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YH2229N6RG"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-YH2229N6RG');
    </script>
    <title>Tax Calculator - Anurag Karundia & Co</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f0f4f8; margin: 0; display: flex; justify-content: center; padding: 20px; min-height: 100vh; position: relative; }
        .watermark-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9999; background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='400' height='250' viewBox='0 0 400 250'><text fill='rgba(26, 115, 232, 0.12)' font-size='20' font-family='Arial' font-weight='bold' x='0' y='0' transform='translate(40,150) rotate(-35)'>ANURAG KARUNDIA & CO</text></svg>"); background-repeat: repeat; }
        .card { background: white; padding: 25px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); width: 100%; max-width: 420px; position: relative; z-index: 1; border: 1px solid #e0e0e0; }
        .header { text-align: center; border-bottom: 2px solid #1a73e8; padding-bottom: 10px; margin-bottom: 20px; }
        .header h1 { color: #1a73e8; font-size: 19px; margin: 0; }
        
        /* Regime Switch Style */
        .regime-selector { display: flex; background: #eee; border-radius: 10px; margin: 15px 0; padding: 5px; position: relative; }
        .regime-btn { flex: 1; padding: 10px; text-align: center; cursor: pointer; font-weight: bold; font-size: 14px; z-index: 2; transition: 0.3s; }
        .regime-btn.active { color: white; background: #1a73e8; border-radius: 8px; }
        
        label { font-weight: bold; display: block; margin-top: 15px; font-size: 13px; color: #555; }
        input { width: 100%; padding: 12px; margin-top: 5px; border: 1px solid #ccc; border-radius: 10px; box-sizing: border-box; font-size: 16px; }
        .btn-calc { width: 100%; padding: 15px; background: #1a73e8; color: white; border: none; border-radius: 10px; font-size: 18px; font-weight: bold; cursor: pointer; margin-top: 20px; }
        .btn-wa { width: 100%; padding: 15px; background: #25D366; color: white; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; font-size: 13px; margin-top: 10px; line-height: 1.4; text-align: center; }
        .btn-share { width: 100%; padding: 15px; background: #075E54; color: white; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; font-size: 16px; margin-top: 15px; display: flex; align-items: center; justify-content: center; gap: 8px; }
        
        #deductionFields { display: none; background: #f9f9f9; padding: 10px; border-radius: 10px; margin-top: 10px; border: 1px dashed #ccc; }
        #resultBox { margin-top: 20px; display: none; }
        .tax-card { background: #fffde7; border: 1px solid #fbc02d; padding: 15px; border-radius: 12px; margin-bottom: 15px; text-align: center; }
        .tax-val { font-size: 32px; color: #d32f2f; font-weight: bold; }
        #detailedReport { display: none; background: #ffffff; padding: 15px; border-radius: 12px; border: 1px solid #4caf50; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 13px; }
        td { padding: 8px 0; border-bottom: 1px dashed #eee; }
        .val { text-align: right; font-weight: bold; }
    </style>
</head>
<body>
<div class="watermark-overlay"></div>
<div class="card">
    <div class="header">
        <h1>Anurag Karundia & Company</h1>
        <div id="displayRegime" style="color:#1a73e8; font-weight:bold; font-size:12px; margin-top:5px;">FY 2025-26 | New Tax Regime</div>
    </div>

    <label>Taxpayer Name</label>
    <input type="text" id="uName" placeholder="Full Name">

    <label>Mobile Number</label>
    <input type="number" id="uMob" placeholder="Enter Mobile Number">

    <label>Individual PAN Number</label>
    <input type="text" id="uPan" maxlength="10" placeholder="Enter PAN" style="text-transform: uppercase;">

    <label>Choose Tax Regime (Touch to Switch)</label>
    <div class="regime-selector">
        <div id="btnNew" class="regime-btn active" onclick="switchRegime('NEW')">New Regime</div>
        <div id="btnOld" class="regime-btn" onclick="switchRegime('OLD')">Old Regime</div>
    </div>

    <label>Gross Total Income (GTI)</label>
    <input type="number" id="uInc" placeholder="Enter Annual Income">

    <div id="deductionFields">
        <label>Section 80C (LIC, PF, ELSS)</label>
        <input type="number" id="u80c" value="0" placeholder="Max 1,50,000">
        <label>Section 80D (Mediclaim)</label>
        <input type="number" id="u80d" value="0" placeholder="Enter Mediclaim">
    </div>

    <button class="btn-calc" onclick="calculateTax()">Calculate Tax</button>

    <div id="resultBox">
        <div class="tax-card">
            <p style="margin:0; font-size:14px;">Net Tax Payable (<span id="resRegimeName">New</span>):</p>
            <div class="tax-val" id="resTax">â‚¹0</div>
            <p id="lockText" style="font-size:12px; color:#e67e22; font-weight:bold; margin-top:5px;">ðŸ”’ Computation Detail is Locked</p>
        </div>
        <button id="waButton" class="btn-wa" onclick="unlockAndSend()">If you want complete calculation detail,<br>please click on WhatsApp</button>
        
        <div id="detailedReport">
            <h3 style="margin:0; color:#2e7d32; font-size:15px; border-bottom: 2px solid #4caf50; padding-bottom:5px;">Tax Computation Sheet</h3>
            <table>
                <tr><td>Gross Income</td><td class="val" id="rowGti">â‚¹0</td></tr>
                <tr><td>Standard Deduction</td><td class="val" id="rowStd">â‚¹75,000</td></tr>
                <tr id="rowDedShow" style="display:none;"><td>Investments (80C+80D)</td><td class="val" id="rowDedVal">â‚¹0</td></tr>
                <tr style="background:#f9f9f9;"><td>Net Taxable Income</td><td class="val" id="rowNet">â‚¹0</td></tr>
                <tr><td>Tax on Slab</td><td class="val" id="rowSlab">â‚¹0</td></tr>
                <tr><td id="reliefLabel">Relief/Rebate</td><td class="val" id="rowRelief">â‚¹0</td></tr>
                <tr><td>Cess (4%)</td><td class="val" id="rowCess">â‚¹0</td></tr>
                <tr style="font-size:15px; color:#d32f2f;"><td><b>Final Net Tax</b></td><td class="val" id="rowFinal">â‚¹0</td></tr>
            </table>
            <button class="btn-share" onclick="shareReport()">ðŸ“² Share Report on WhatsApp</button>
        </div>
    </div>
</div>

<script>
    var currentRegime = "NEW";

    function switchRegime(type) {
        currentRegime = type;
        document.getElementById('btnNew').classList.toggle('active', type === 'NEW');
        document.getElementById('btnOld').classList.toggle('active', type === 'OLD');
        document.getElementById('displayRegime').innerText = "FY 2025-26 | " + type + " Tax Regime";
        document.getElementById('deductionFields').style.display = (type === 'OLD') ? "block" : "none";
        document.getElementById('resultBox').style.display = "none";
    }

    function calculateTax() {
        var n = document.getElementById('uName').value;
        var i = parseFloat(document.getElementById('uInc').value) || 0;
        var m = document.getElementById('uMob').value;
        var p = document.getElementById('uPan').value.toUpperCase();
        
        if(!n || !m || p.length < 10 || i <= 0) { alert("Please enter all details correctly!"); return; }

        var stdDed = (currentRegime === "NEW") ? 75000 : 50000;
        var d80c = (currentRegime === "OLD") ? Math.min(150000, parseFloat(document.getElementById('u80c').value) || 0) : 0;
        var d80d = (currentRegime === "OLD") ? (parseFloat(document.getElementById('u80d').value) || 0) : 0;
        
        var taxable = Math.max(0, i - stdDed - d80c - d80d);
        var slabTax = 0;

        if (currentRegime === "NEW") {
            if (taxable > 2400000) slabTax = 300000 + (taxable - 2400000) * 0.3;
            else if (taxable > 2000000) slabTax = 200000 + (taxable - 2000000) * 0.25;
            else if (taxable > 1600000) slabTax = 120000 + (taxable - 1600000) * 0.2;
            else if (taxable > 1200000) slabTax = 60000 + (taxable - 1200000) * 0.15;
            else if (taxable > 800000) slabTax = 20000 + (taxable - 800000) * 0.1;
            else if (taxable > 400000) slabTax = (taxable - 400000) * 0.05;
        } else {
            // Old Regime Slabs
            if (taxable > 1000000) slabTax = 112500 + (taxable - 1000000) * 0.3;
            else if (taxable > 500000) slabTax = 12500 + (taxable - 500000) * 0.2;
            else if (taxable > 250000) slabTax = (taxable - 250000) * 0.05;
        }

        var rebate = 0;
        var rLabel = "Rebate/Relief";
        if (currentRegime === "NEW") {
            if (taxable <= 1200000) rebate = slabTax;
            else if (slabTax > (taxable - 1200000)) { rebate = slabTax - (taxable - 1200000); rLabel = "Marginal Relief"; }
        } else {
            if (taxable <= 500000) rebate = Math.min(slabTax, 12500);
        }

        var taxBeforeCess = Math.max(0, slabTax - rebate);
        var cess = taxBeforeCess * 0.04;
        var finalTax = Math.round((taxBeforeCess + cess) / 10) * 10;

        // UI Update
        document.getElementById('resTax').innerText = "â‚¹" + finalTax.toLocaleString('en-IN');
        document.getElementById('resRegimeName').innerText = currentRegime;
        document.getElementById('rowGti').innerText = "â‚¹" + i.toLocaleString('en-IN');
        document.getElementById('rowStd').innerText = "-â‚¹" + stdDed.toLocaleString('en-IN');
        document.getElementById('rowNet').innerText = "â‚¹" + taxable.toLocaleString('en-IN');
        document.getElementById('rowSlab').innerText = "â‚¹" + Math.round(slabTax).toLocaleString('en-IN');
        document.getElementById('rowRelief').innerText = "-â‚¹" + Math.round(rebate).toLocaleString('en-IN');
        document.getElementById('rowCess').innerText = "â‚¹" + Math.round(cess).toLocaleString('en-IN');
        document.getElementById('rowFinal').innerText = "â‚¹" + finalTax.toLocaleString('en-IN');
        
        document.getElementById('rowDedShow').style.display = (currentRegime === "OLD") ? "table-row" : "none";
        document.getElementById('rowDedVal').innerText = "-â‚¹" + (d80c + d80d).toLocaleString('en-IN');

        document.getElementById('resultBox').style.display = "block";
        document.getElementById('detailedReport').style.display = "none";
        document.getElementById('waButton').style.display = "block";
        document.getElementById('lockText').style.display = "block";
    }

    function unlockAndSend() {
        var msg = "Requesting Tax Detail Unlock for " + document.getElementById('uName').value;
        window.open("https://wa.me/919634100100?text=" + encodeURIComponent(msg), '_blank');
        var code = document.getElementById('uMob').value.slice(-3);
        setTimeout(function() {
            var input = prompt("Enter last 3 digits of Mobile:");
            if (input === code) {
                document.getElementById('waButton').style.display = "none";
                document.getElementById('lockText').style.display = "none";
                document.getElementById('detailedReport').style.display = "block";
            }
        }, 1000);
    }

    function shareReport() {
        var n = document.getElementById('uName').value;
        var p = document.getElementById('uPan').value.toUpperCase();
        var report = "TAX COMPUTATION REPORT\n" +
                     "FY 2025-26 | " + currentRegime + " Regime\n" +
                     "Anurag Karundia & Company\n" +
                     "---------------------------\n" +
                     "Taxpayer: " + n + "\n" +
                     "PAN: " + p + "\n" +
                     "---------------------------\n" +
                     "Gross Income: " + document.getElementById('rowGti').innerText + "\n" +
                     "Net Taxable: " + document.getElementById('rowNet').innerText + "\n" +
                     "Tax on Slab: " + document.getElementById('rowSlab').innerText + "\n" +
                     "Cess: " + document.getElementById('rowCess').innerText + "\n" +
                     "---------------------------\n" +
                     "FINAL TAX PAYABLE: " + document.getElementById('rowFinal').innerText + "\n" +
                     "---------------------------\n" +
                     "Calculated via AK&Co Tax Tool";
        window.open("https://wa.me/?text=" + encodeURIComponent(report), '_blank');
    }
</script>
</body>
</html>
